!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Boid=t()}}(function(){return function t(e,n,i){function r(s,u){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){var n=e[s][1][t];return r(n?n:t)},h,h.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){"use strict";function i(){var t=r.get(),e=r.get(),n=r.get(),o={x:0,y:0,width:640,height:480},s=i.EDGE_BOUNCE,u=1,c=10,a=c*c,h=1,d=50,f=d*d,l=10,p=5,y=0,g=1,x=300,v=20,B=0,b=20,m=b*b,w=300,E=w*w,q=60,z=q*q,D=function(t,e,n,i){return o.width=t,o.height=e,o.x=n||0,o.y=i||0,I},P=function(){return n.truncate(h),n.divideBy(u),e.add(n),n.reset(),e.truncate(c),t.add(e),s===i.EDGE_BOUNCE?M():s===i.EDGE_WRAP&&S(),I},M=function(){t.x>o.width?(t.x=o.width,e.x*=-1):t.x<o.x&&(t.x=o.x,e.x*=-1),t.y>o.height?(t.y=o.height,e.y*=-1):t.y<o.y&&(t.y=o.y,e.y*=-1)},S=function(){t.x>o.width?t.x=o.x:t.x<o.x&&(t.x=o.width),t.y>o.height?t.y=o.y:t.y<o.y&&(t.y=o.height)},N=function(i){var r=i.clone().subtract(t);r.normalize(),r.scaleBy(c);var o=r.subtract(e);return n.add(o),o.dispose(),I},O=function(i){var r=i.clone().subtract(t);r.normalize(),r.scaleBy(c);var o=r.subtract(e);return n.subtract(o),o.dispose(),I},j=function(i){var r=i.clone().subtract(t);r.normalize();var o=t.distanceSq(i);if(o>f)r.scaleBy(c);else{var s=c*o/f;r.scaleBy(s)}var u=r.subtract(e);return n.add(u),u.dispose(),I},_=function(e){var n=t.distanceSq(e.position)/a,i=e.velocity.clone().scaleBy(n),r=e.position.clone().add(i);return N(r),i.dispose(),r.dispose(),I},G=function(e){var n=t.distanceSq(e.position)/a,i=e.velocity.clone().scaleBy(n),r=e.position.clone().add(i);return O(r),i.dispose(),r.dispose(),I},U=function(){var t=e.clone().normalize().scaleBy(l),i=r.get();i.length=p,i.angle=y,y+=Math.random()*g-.5*g;var o=t.add(i);return n.add(o),i.dispose(),o.dispose(),I},C=function(i){for(var r=0;r<i.length;r++){var o=i[r],s=e.clone().normalize(),u=o.position.clone().subtract(t),a=u.dotProduct(s);if(a>0){var h=s.clone().scaleBy(x),d=s.clone().scaleBy(a),f=d.subtract(u),l=f.length;if(l<(o.radius||0)+v&&d.length<h.length){var p=s.clone().scaleBy(c);p.angle+=u.sign(e)*Math.PI/2,p.scaleBy(1-d.length/h.length),n.add(p),e.scaleBy(d.length/h.length),p.dispose()}h.dispose(),d.dispose(),f.dispose()}s.dispose(),u.dispose()}return I},R=function(e,n){n=!!n;var i=e[B];return i?(t.distanceSq(i)<m&&(B>=e.length-1?n&&(B=0):B++),B>=e.length-1&&!n?j(i):N(i),I):(B=0,I)},T=function(t){for(var i=e.clone(),o=r.get(),s=0,u=0;u<t.length;u++){var c=t[u];c!==I&&A(c)&&(i.add(c.velocity),o.add(c.position),F(c)&&O(c.position),s++)}return s>0&&(i.divideBy(s),o.divideBy(s),N(o),n.add(i.subtract(e))),i.dispose(),o.dispose(),I},A=function(n){if(t.distanceSq(n.position)>E)return!1;var i=e.clone().normalize(),r=n.position.clone().subtract(t),o=r.dotProduct(i);return i.dispose(),r.dispose(),0>o?!1:!0},F=function(e){return t.distanceSq(e.position)<z},I={setBounds:D,update:P,pursue:_,evade:G,wander:U,avoid:C,followPath:R,flock:T,arrive:j,flee:O,position:t,velocity:e,userData:{}};return Object.defineProperties(I,{edgeBehavior:{get:function(){return s},set:function(t){s=t}},mass:{get:function(){return u},set:function(t){u=t}},maxSpeed:{get:function(){return c},set:function(t){c=t,a=t*t}},maxForce:{get:function(){return h},set:function(t){h=t}},arriveThreshold:{get:function(){return d},set:function(t){d=t,f=t*t}},wanderDistance:{get:function(){return l},set:function(t){l=t}},wanderRadius:{get:function(){return p},set:function(t){p=t}},wanderRange:{get:function(){return g},set:function(t){g=t}},avoidDistance:{get:function(){return x},set:function(t){x=t}},avoidBuffer:{get:function(){return v},set:function(t){v=t}},pathIndex:{get:function(){return B},set:function(t){B=t}},pathThreshold:{get:function(){return b},set:function(t){b=t,m=t*t}},maxDistance:{get:function(){return w},set:function(t){w=t,E=t*t}},minDistance:{get:function(){return q},set:function(t){q=t,z=t*t}}}),Object.freeze(I)}var r=t("./vec2.js");i.EDGE_NONE="none",i.EDGE_BOUNCE="bounce",i.EDGE_WRAP="wrap",i.Vec2=r,i.vec2=function(t,e){return r.get(t,e)},i.obstacle=function(t,e,n){return{radius:t,position:r.get(e,n)}},"object"==typeof e&&e.exports&&(e.exports=i)},{"./vec2.js":2}],2:[function(t,e,n){"use strict";function i(t,e){this.x=t||0,this.y=e||0}i.prototype={add:function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this},subtract:function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this},normalize:function(){var t=this.length;return 0===t?(this.x=1,this):(this.x/=t,this.y/=t,this)},isNormalized:function(){return 1===this.length},truncate:function(t){return this.length>t&&(this.length=t),this},scaleBy:function(t){return this.x*=t,this.y*=t,this},divideBy:function(t){return this.x/=t,this.y/=t,this},equals:function(t){return this.x===t.x&&this.y===t.y},negate:function(){return this.x=-this.x,this.y=-this.y,this},dotProduct:function(t){return this.x*t.x+this.y*t.y},crossProduct:function(t){return this.x*t.y-this.y*t.x},distanceSq:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},distance:function(t){return Math.sqrt(this.distanceSq(t))},clone:function(){return i.get(this.x,this.y)},reset:function(){return this.x=0,this.y=0,this},perpendicular:function(){return i.get(-this.y,this.x)},sign:function(t){var e=this.perpendicular(),n=e.dotProduct(t)<0?-1:1;return e.dispose(),n},set:function(t,e){return this.x=t||0,this.y=e||0,this},dispose:function(){i.pool.push(this.reset())}},Object.defineProperties(i.prototype,{lengthSquared:{get:function(){return this.x*this.x+this.y*this.y}},length:{get:function(){return Math.sqrt(this.lengthSquared)},set:function(t){var e=this.angle;this.x=Math.cos(e)*t,this.y=Math.sin(e)*t}},angle:{get:function(){return Math.atan2(this.y,this.x)},set:function(t){var e=this.length;this.x=Math.cos(t)*e,this.y=Math.sin(t)*e}}}),i.pool=[],i.get=function(t,e){var n=i.pool.length>0?i.pool.pop():new i;return n.set(t,e),n},i.fill=function(t){for(;i.pool.length<t;)i.pool.push(new i)},i.angleBetween=function(t,e){return t.isNormalized()||(t=t.clone().normalize()),e.isNormalized()||(e=e.clone().normalize()),Math.acos(t.dotProduct(e))},"object"==typeof e&&e.exports&&(e.exports=i)},{}]},{},[1])(1)});