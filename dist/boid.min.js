!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Boid=t()}}(function(){return function t(e,n,i){function r(s,u){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return r(n?n:t)},d,d.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){"use strict";function i(){var t=r.get(),e=r.get(),n=r.get(),o={x:0,y:0,width:640,height:480},s=i.EDGE_BOUNCE,u=1,c=10,a=1,d=50,h=10,f=5,l=0,y=1,p=300,g=20,x=0,v=20,B=300,b=60,m=function(t,e,n,i){return o.width=t,o.height=e,o.x=n||0,o.y=i||0,U},w=function(){return n.truncate(a),n.divideBy(u),e.add(n),n.reset(),e.truncate(c),t.add(e),s===i.EDGE_BOUNCE?E():s===i.EDGE_WRAP&&z(),U},E=function(){t.x>o.width?(t.x=o.width,e.x*=-1):t.x<o.x&&(t.x=o.x,e.x*=-1),t.y>o.height?(t.y=o.height,e.y*=-1):t.y<o.y&&(t.y=o.y,e.y*=-1)},z=function(){t.x>o.width?t.x=o.x:t.x<o.x&&(t.x=o.width),t.y>o.height?t.y=o.y:t.y<o.y&&(t.y=o.height)},D=function(i){var r=i.clone().subtract(t);r.normalize(),r.scaleBy(c);var o=r.subtract(e);return n.add(o),o.dispose(),U},P=function(i){var r=i.clone().subtract(t);r.normalize(),r.scaleBy(c);var o=r.subtract(e);return n.subtract(o),o.dispose(),U},q=function(i){var r=i.clone().subtract(t);r.normalize();var o=t.distance(i);if(o>d)r.scaleBy(c);else{var s=c*o/d;r.scaleBy(s)}var u=r.subtract(e);return n.add(u),u.dispose(),U},M=function(e){var n=t.distance(e.position)/c,i=e.velocity.clone().scaleBy(n),r=e.position.clone().add(i);return D(r),i.dispose(),r.dispose(),U},N=function(e){var n=t.distance(e.position)/c,i=e.velocity.clone().scaleBy(n),r=e.position.clone().add(i);return P(r),i.dispose(),r.dispose(),U},O=function(){var t=e.clone().normalize().scaleBy(h),i=r.get();i.length=f,i.angle=l,l+=Math.random()*y-.5*y;var o=t.add(i);return n.add(o),i.dispose(),o.dispose(),U},j=function(i){for(var r=0;r<i.length;r++){var o=i[r],s=e.clone().normalize(),u=o.position.clone().subtract(t),a=u.dotProduct(s);if(a>0){var d=s.clone().scaleBy(p),h=s.clone().scaleBy(a),f=h.subtract(u),l=f.length;if(l<(o.radius||0)+g&&h.length<d.length){var y=s.clone().scaleBy(c);y.angle+=u.sign(e)*Math.PI/2,y.scaleBy(1-h.length/d.length),n.add(y),e.scaleBy(h.length/d.length),y.dispose()}d.dispose(),h.dispose(),f.dispose()}s.dispose(),u.dispose()}return U},_=function(e,n){n=!!n;var i=e[x];return i?(t.distance(i)<v&&(x>=e.length-1?n&&(x=0):x++),x>=e.length-1&&!n?q(i):D(i),U):(x=0,U)},G=function(t){for(var i=e.clone(),o=r.get(),s=0,u=0;u<t.length;u++){var c=t[u];c!==U&&S(c)&&(i.add(c.velocity),o.add(c.position),C(c)&&P(c.position),s++)}return s>0&&(i.divideBy(s),o.divideBy(s),D(o),n.add(i.subtract(e))),i.dispose(),o.dispose(),U},S=function(n){if(t.distance(n.position)>B)return!1;var i=e.clone().normalize(),r=n.position.clone().subtract(t),o=r.dotProduct(i);return i.dispose(),r.dispose(),0>o?!1:!0},C=function(e){return t.distance(e.position)<b},U={setBounds:m,update:w,pursue:M,evade:N,wander:O,avoid:j,followPath:_,flock:G,arrive:q,flee:P,userData:{}};return Object.defineProperties(U,{position:{get:function(){return t}},velocity:{get:function(){return e}},edgeBehavior:{get:function(){return s},set:function(t){s=t}},mass:{get:function(){return u},set:function(t){u=t}},maxSpeed:{get:function(){return c},set:function(t){c=t}},maxForce:{get:function(){return a},set:function(t){a=t}},arriveThreshold:{get:function(){return d},set:function(t){d=t}},wanderDistance:{get:function(){return h},set:function(t){h=t}},wanderRadius:{get:function(){return f},set:function(t){f=t}},wanderRange:{get:function(){return y},set:function(t){y=t}},avoidDistance:{get:function(){return p},set:function(t){p=t}},avoidBuffer:{get:function(){return g},set:function(t){g=t}},pathIndex:{get:function(){return x},set:function(t){x=t}},pathThreshold:{get:function(){return v},set:function(t){v=t}},inSightDistance:{get:function(){return B},set:function(t){B=t}},tooCloseDistance:{get:function(){return b},set:function(t){b=t}}}),Object.freeze(U)}var r=t("./vec2.js");i.EDGE_NONE="none",i.EDGE_BOUNCE="bounce",i.EDGE_WRAP="wrap",i.Vec2=r,i.vec2=function(t,e){return r.get(t,e)},i.obstacle=function(t,e,n){return{radius:t,position:r.get(e,n)}},"object"==typeof e&&e.exports&&(e.exports=i)},{"./vec2.js":2}],2:[function(t,e,n){"use strict";function i(t,e){this.x=t||0,this.y=e||0}i.prototype={add:function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this},subtract:function(t){return this.x=this.x-t.x,this.y=this.y-t.y,this},normalize:function(){var t=this.length;return 0===t?(this.x=1,this):(this.x/=t,this.y/=t,this)},isNormalized:function(){return 1===this.length},truncate:function(t){return this.length>t&&(this.length=t),this},scaleBy:function(t){return this.x*=t,this.y*=t,this},divideBy:function(t){return this.x/=t,this.y/=t,this},equals:function(t){return this.x===t.x&&this.y===t.y},negate:function(){return this.x=-this.x,this.y=-this.y,this},dotProduct:function(t){return this.x*t.x+this.y*t.y},crossProduct:function(t){return this.x*t.y-this.y*t.x},distanceSquared:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},distance:function(t){return Math.sqrt(this.distanceSquared(t))},clone:function(){return i.get(this.x,this.y)},reset:function(){return this.x=0,this.y=0,this},perpendicular:function(){return i.get(-this.y,this.x)},sign:function(t){var e=this.perpendicular(),n=e.dotProduct(t)<0?-1:1;return e.dispose(),n},set:function(t,e){return this.x=t||0,this.y=e||0,this},dispose:function(){i.pool.push(this.reset())}},Object.defineProperties(i.prototype,{lengthSquared:{get:function(){return this.x*this.x+this.y*this.y}},length:{get:function(){return Math.sqrt(this.lengthSquared)},set:function(t){var e=this.angle;this.x=Math.cos(e)*t,this.y=Math.sin(e)*t}},angle:{get:function(){return Math.atan2(this.y,this.x)},set:function(t){var e=this.length;this.x=Math.cos(t)*e,this.y=Math.sin(t)*e}}}),i.pool=[],i.get=function(t,e){var n=i.pool.length>0?i.pool.pop():new i;return n.set(t,e),n},i.angleBetween=function(t,e){return t.isNormalized()||(t=t.clone().normalize()),e.isNormalized()||(e=e.clone().normalize()),Math.acos(t.dotProduct(e))},"object"==typeof e&&e.exports&&(e.exports=i)},{}]},{},[1])(1)});